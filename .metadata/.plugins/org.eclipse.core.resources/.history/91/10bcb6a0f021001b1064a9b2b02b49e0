/*
 * read_microsd_data.c
 *
 *  Created on: Nov 8, 2020
 *      Author: chris
 */

#include "read_microsd_data.h"


void read_sdio_data()
{
	 // try to mount Micro-SD card

	  FRESULT fres = f_mount(&SDFatFS, SDPath, 0);
	  if(fres != FR_OK)
	  {
		  error_sdio("mount");
	  }

	  DWORD free_clusters, free_sectors, total_sectors;

	  FATFS* getFreeFs;

	  fres = f_getfree("", &free_clusters, &getFreeFs);
	  if (fres != FR_OK) {
		  error_sdio();
	  }

	  total_sectors = (getFreeFs->n_fatent - 2) * getFreeFs->csize;
	  free_sectors = free_clusters * getFreeFs->csize;

	  printf("SD card stats:\r\n%10lu KiB total drive space.\r\n%10lu KiB available.\r\n", total_sectors / 2, free_sectors / 2);

}

void write_sdio_data(char* filename, char* text)
{

}

void error_sdio(char* opcode)
{
	printf("Error when performing SDIO: %s ", opcode);
}
